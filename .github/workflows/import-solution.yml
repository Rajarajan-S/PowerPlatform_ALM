name: import-solution

on:
  workflow_dispatch:
    inputs:
      solution_name:
        description: 'Name of the solution from Power Platform'
        required: true
      solution_import_folder:
        description: 'Folder name where the solution to import is located *do not change*'
        required: true
        default: out/solutions/
      solution_target_folder: 
        description: 'Folder name in target environment for the imported solution *do not change*'
        required: true
        default: solutions/

jobs:
  import-to-target:
    runs-on: windows-latest
    # or you can say runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
      with:
        lfs: true

    - name: import-solution action
      uses: microsoft/powerplatform-actions/import-solution@v0
      with:
        environment-url: 'YOUR_TARGET_ENVIRONMENT_URL'
        app-id: 'YOUR_APP_ID'
        client-secret: ${{ secrets.POWERPLATFORMALM }}
        tenant-id: 'YOUR_TENANT_ID'
        solution-file: ${{ github.event.inputs.solution_import_folder}}/${{ github.event.inputs.solution_name }}
        target-folder: ${{ github.event.inputs.solution_target_folder}}
